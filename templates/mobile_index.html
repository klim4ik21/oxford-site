<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mobile News Feed</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/mobile_style.css') }}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.8/hammer.min.js"></script>
</head>
<body>
    <div class="main-container">
        <h1 class="news-feed-title">News Feed</h1>

        <div class="posts-container">
            {% for post in posts %}
            <div class="news-item">
                <div class="post-header">
                    <a href="#" class="post-username">{{ post['username'] }}</a>
                    <span class="post-date">{{ post['created_at'] }}</span>
                </div>

                {% if post['full_image_url'] %}
                <div class="post-image-container">
                    <img src="{{ post['full_image_url'] }}" alt="Post image">
                </div>
                {% endif %}

                <div class="post-content">
                    <h3>{{ post['head_title'] }}</h3>
                    <p>{{ post['text'] }}</p>
                </div>

                <button class="comment-button" onclick="showCommentsPanel('{{ post['id'] }}')">Comments</button>
            </div>
            {% endfor %}
        </div>
    </div>

    <div class="comments-panel" id="commentsPanel">
        <div class="comments-content" id="commentsContent">
            <!-- Динамическое добавление комментариев -->
        </div>
        <div class="comment-form-container">
            <form method="post" action="#" class="comment-form">
                <textarea name="comment_text" placeholder="Add a comment..."></textarea>
                <button type="submit">Comment</button>
            </form>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var commentsPanel = document.getElementById('commentsPanel');
            var hammer = new Hammer(commentsPanel);
    
            hammer.on('swipedown', function() {
                commentsPanel.style.bottom = '-100%';
            });
        });

        function showCommentsPanel(postId) {
            var commentsContent = document.getElementById('commentsContent');
            // Здесь будет AJAX-запрос или другой механизм получения комментариев
            commentsContent.innerHTML = 'Загрузка комментариев...'; // Пример содержимого
            document.getElementById('commentsPanel').style.bottom = '0';
        }
    </script>
</body>
</html>
